# vim中的查找和替换  
---  
查找和替换是编辑器中最常用的功能之一，在普通编辑器当中查找替换时，你可能需要先移动鼠标在菜单中点击查找的功能，输入查找内容，再点击确认查找。  而在vim中，所有的操作只需要敲击几下键盘就行了，手不用离开键盘区域，速度自然会快很多很多。  
**keyword:**
- 字符替换命令
- 字符查找命令  
## 1.  替换和撤销命令  
这两种命令都是普通模式下进行的  

| 命令             | 说明                                         |
| ---------------- | -------------------------------------------- |
| `r`+<待替换字母> | 将游标所在字母替换为指定字母                 |
| `R`              | 连续替换，直到按下`Esc`                      |
| `cc`             | 替换整行，即删除游标所在行，并进入插入模式   |
| `cw`             | 替换一个单词，即删除一个单词，并进入插入模式 |
| `C`(大写)        | 替换游标以后至行末                           |
| `~`              | 反转游标所在字母大小写                       |
| `u`{n}           | 撤销一次或n次操作                            |
| `U`(大写)        | 撤销当前行的所有修改                         |
| `Ctrl+r`         | redo，即撤销undo的操作                       |


实验操作  
打开vim   输入test1.txt
随机输入一串数字进行实验  
- 输入fa 跳转到第一个a字符
- 输入r，并且输入b，a字符被b字符替换
- 输入R替换字符，输入新字符串，输入完按ESC回到普通模式
- 输入cc替换整行字符，输入新字符串，输入完按ESC回到普通模式
- 输入cw 替换一个英文字(word)，输入完按ESC回到普通模式
- 输入~，翻转游标所在字符的大小写
- 输入C 替换至行尾，即游标所在处以后的字都会被替换，输入完按ESC回到普通模式
- 输入u 撤销上一次的操作  
尝试完毕后  
可以输入多行字符进行尝试。  
- 输入2G，跳转到第2行，同理3G跳转到第3行。
## 2. 快速缩进
- 普通模式下输入:进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数    

缩进操作均在普通模式下有效  
打开文件进行编辑  
$ vim protocols  
输入几行单词或字符  
普通模式下输入15G，跳转到15行  
普通模式下输入>> 整行将向右缩进
普通模式下输入<< 整行向左回退  
普通模式下输入:进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数    
-  shiftwidth命令  
shiftwidth命令是指上一节>>命令产生的缩进（可以简写成sw）  
普通模式下输入:进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数 获取目前的设定值  
:set shiftwidth?  
设置缩进为10个字符  
:set shiftwidth=10  
输入 ESC 回到普通模式，再次尝试 >> 缩进量发生了明显变化      

- 调整文本位置   
命令行模式下输入:ce(center)命令使本行内容居中  
:ce  
命令行模式下输入:ri(right)命令使本行文本靠右
:ri  
命令行模式下输入:le(left)命令使本行内容靠左  
:le  
## 3. 查找   
普通模式下输入 / 然后键入需要查找的字符串 按回车后就会进行查找。 ？ 与/ 功能相同，只不过 ？ 是向上而 / 是向下查找。 进入查找之后，输入n 和 N 可以继续查找。 n是查找下一个内容,N查找上一个内容。   
**实验练习**  
使用 vim 打开文件进行编辑（搜索高亮需要在配置文件 .vimrc 中设置 set hls ，实验环境中已经设置好了）  

$ vim protocols  
普通模式下输入/icmp然后回车即可查找字符串 icmp  
普通模式下输入n查找下一个 icmp  
普通模式下输入？tcp向上查找字符串 tcp  
普通模式下输入N查找上一个出现的 tcp  
命令行模式下输入 noh 然后回车即可取消搜索  
### 高级查找  
普通模式下输入\*寻找游标所在处的单词  
普通模式下输入\#同上，但 \# 是向前（上）找，\*则是向后（下）找  
普通模式下输入g\*同\* ，但部分符合该单词即可  
普通模式下输入g\#同\# ，但部分符合该单词即可  
以上查找n,N 的继续查找命令依然可以用  
